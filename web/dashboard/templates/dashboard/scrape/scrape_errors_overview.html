{% extends "dashboard/base.html" %}
{% load static %}
{% load pipeline %}
{% load dashboard_utils %}

{% block content %}

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        {% for error_type in errors %}
            <li class="nav-item">
                <a class="nav-link {% if forloop.first %}active display{% endif %}" id="{{ forloop.counter0 }}-tab" data-toggle="tab" href="#error-list-{{ forloop.counter0 }}" role="tab"
                   aria-controls="error-list-{{ forloop.counter0 }}"
                   aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">{{ error_type }}</a>
            </li>
        {% endfor %}

    </ul>


    <div class="container">

        <div class="tab-content" id="locationTabContent">
        {% for errors in errors.values %}
            <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="error-list-{{ forloop.counter0 }}" role="tabpanel" aria-labelledby="{{ forloop.counter0 }}-tab">
                <div class="row">
                    {% for error in errors %}
                        <div class="col-12 p-2">
                            {% if error.paper %}
                                {% include 'dashboard/scrape/partials/_error_card.html' with error=error ref_paper=referenced_papers|get_item:error.paper.doi %}
                            {% else %}
                                {% include 'dashboard/scrape/partials/_error_card.html' with error=error%}
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}


    </div>
{% endblock %}

{% block script %}
{% endblock %}